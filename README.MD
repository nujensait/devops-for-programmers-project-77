## Ссылки
- Урок:   https://ru.hexlet.io/programs/devops-for-programmers/projects/77
- Демонстрация:   https://asciinema.org/a/aeg7afREm5TJHn9PT0S465lEa

## Цель
Создавать инфраструктуру для веб приложений можно разными способами. Самый очевидный и простой - зайти напрямую на облачный сервис, купить сервер, зайти на сервер и установить все необходимое для работы приложения. Такой подход не позволяет масштабироваться и быстро восстановить инфраструктуру после сбоев. Другой путь - использовать подход инфраструктура как код. Описывать все задачи по созданию и настройки всей инфраструктуры с помощью специальных инструментов. При этом вводится полный запрет на внесение изменений в инфраструктуру без этих инструментов. Такой подход позволяет быть уверенным в том, что при любой внештатной ситуации, инженеры восстановят работу приложения в кратчайшие сроки, т.к. им не придется вспоминать каким образом создавалась и настраивалась инфраструктура. Так же уже написанный код позволяет легко добавлять или убирать сервера и прочие ресурсы, что сильно облегчает масштабирование при возрастающих нагрузках.

Terraform - это мощный инструмент, который позволяет описывать инфраструктуру с помощью кода. Он отслеживает изменения, которые произошли в конфигурации и актуализирует инфраструктуру (удаляет или создаёт ресурсы - сервера, сеть, базы данных и т.п.). Если какие-то ресурсы не могут быть изменены, то они пересоздаются. Terraform может работать не только со множеством облачных провайдеров, но и с другими технологиями, например с сервисами логирования, мониторинга и VCS.

Установка необходимых приложений на готовые сервера осуществляется с помощью Ansible. Он позволяет автоматизировать действия на серверах - начиная от установки приложений и заканчивая точечной настройкой конфигурационных файлов. Так же есть возможность использовать готовые роли, которые хранятся в Ansible Galaxy. Это помогает значительно ускорить разворачивание инфраструктуры.

Само приложение запускается в контейнере Docker. Он позволяет упаковать всё необходимое для работы приложения (процесса) в образ и запускать изолированно от основной системы. Таким образом избегаются конфликты между разными версиями приложений и упрощается деплой. Docker стал стандартом в индустрии для деплоя приложений. Существуют разные подходы и схемы деплоя, но мало какие из них обходятся без Docker контейнеров.

## Описание
Для выполнения проекта студенты проходят полный цикл разворачивания веб приложения в облаке. Создают инфраструктуру, деплоят приложение и настраивают мониторинг серверов.

Инфраструктура типового приложения, которое развернёт студент, может выглядеть следующим образом:

- Два веб-сервера с приложением (в этом проекте используется готовое приложение), которое работает внутри Docker
- Балансировщик нагрузки, который принимает запросы по HTTPS и перенаправляет их веб-серверам
- База данных как сервис

---------------

## Задание
- Практически все концепции, которые рассматриваются в Devops практиках, актуальны в любом проекте. Отличия появляются (но они несущественны) появляются, если необходимо изменить облако (например на Amazon AWS). Но даже в этом случае база остается базой. Поменяются названия ресурсов в Terraform, а так же их параметры. В этом проекте не будет чего-то кардинально нового. Вы можете быстро собрать готовый проект из текущих, а можете написать его с нуля. Сейчас предпочтителен второй путь, чтобы заново встретить проблемы и точно разобраться во всем. В работе над реальными проектами, инфраструктура описывается один раз и дальше конфигурационные файлы спокойно копируются по проектам. Конечно при этом меняется количество серверов, параметры сети и так далее, но общий вид инфраструктуры остается примерно одинаковым.

## Облачные хостинги (провайдеры)
- Cloud provider (облачный провайдер) — компания, которая предоставляет услуги на основе облачных вычислений с применением виртуальных вычислительных мощностей. Такие сервисы позволяют создать и удалять инфраструктуру (сервера, базы данных, балансировщики) в один клик, объединять их в общие виртуальные сети, делать бекапы, а также другие возможности. Некоторые провайдеры предоставляют ознакомительный период, которым можно воспользоваться.

## Требования
- Все файлы Terraform должны находиться в директории terraform
- Значения секретных переменных (ключи, токены, пароли) должны передаваться снаружи
- Настройки провайдеров должны находиться в файле provider.tf
- Настройки Terraform Backend должны храниться в файле backend.tf
- Стейт инфраструктуры отсутствует в репозитории и размещен удаленно облаке

## Задачи
- Зарегистрируйтесь в облачном провайдере (Yandex Cloud:   https://console.yandex.cloud/ ).
- Подготовьте базовую структуру для проекта. Создайте директории terraform и ansible в которых будут располагаться инфраструктурные файлы и плейбуки
- Создайте с помощью Ansible Vault зашифрованный файл, в котором будут необходимые переменные для работы Terraform с облаком (например токен облачного провайдера)